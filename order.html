<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Order Food — Bansal Food Studio</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    :root{
      --accent:#b2322a;
      --muted:#666;
      --bg:#faf8f6;
      --card:#fff;
      --radius:12px;
      --maxw:1100px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:#222}
    .container{max-width:var(--maxw);margin:0 auto;padding:20px}
    header{background:#fff;border-bottom:1px solid #eee}
    .inner{display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
    .brand{display:flex;gap:12px;align-items:center}
    .brand h1{margin:0;color:var(--accent);font-family:serif}
    nav{display:flex;gap:10px}
    .nav-btn{background:#fff1ea;color:#6a2a25;padding:8px 10px;border-radius:8px;text-decoration:none;font-weight:600}
    .nav-cta{background:var(--accent);color:#fff;padding:8px 10px;border-radius:8px;text-decoration:none;font-weight:700}
    .page-head{padding:26px 0 10px}
    .page-head h2{margin:0;color:var(--accent);font-family:serif}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}
    .item-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px dashed #eee}
    .add-btn{background:var(--accent);color:#fff;border:0;padding:6px 10px;border-radius:6px;cursor:pointer}
    .cart-box{background:#fff;border-radius:12px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}
    .cart-item{display:flex;justify-content:space-between;gap:8px;margin-bottom:8px;align-items:center}
    .cart-item button{background:#ddd;border:0;border-radius:6px;padding:6px;cursor:pointer}
    .qr-box{background:#fff;padding:12px;border-radius:10px;text-align:center;box-shadow:0 8px 20px rgba(0,0,0,0.06);margin-top:12px}
    form{background:#fff;padding:12px;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.06);margin-top:12px}
    input,textarea{width:100%;padding:8px;margin:6px 0;border-radius:8px;border:1px solid #ccc}
    button[type="submit"]{background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:8px;cursor:pointer}
    @media(max-width:880px){
      .grid{grid-template-columns:1fr}
      nav{gap:6px;flex-wrap:wrap}
    }
  </style>
</head>
<body>
  <header>
    <div class="inner container">
      <div class="brand">
        <!-- logo optional: if you have images/logo.png you can keep an <img> here -->
        <h1>Bansal Food Studio</h1>
      </div>
      <nav>
        <a class="nav-btn" href="index.html">Home</a>
        <a class="nav-btn" href="menu.html">Menu</a>
        <a class="nav-btn" href="about.html">About</a>
        <a class="nav-btn" href="contact.html">Contact</a>
        <a class="nav-btn" href="book.html">Book a Table</a>
        <a class="nav-cta" href="order.html">Order Food</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <div class="page-head">
      <h2>Order Food Online</h2>
      <p style="color:var(--muted);margin-top:6px">Choose items and add to cart. Please pay 50% advance using QR shown below and paste TXN ID in the form.</p>
    </div>

    <div class="grid">
      <!-- LEFT: menu list (simple, text only) -->
      <div>
        <div class="card">
          <h3>Menu — Add to cart</h3>

          <!-- Simple single item per section as requested -->
          <div class="item-row">
            <div>Paneer Punjabi — ₹199</div>
            <button class="add-btn" data-name="Paneer Punjabi" data-price="199">Add</button>
          </div>

          <div class="item-row">
            <div>Kadhai Paneer — ₹209</div>
            <button class="add-btn" data-name="Kadhai Paneer" data-price="209">Add</button>
          </div>

          <div class="item-row">
            <div>Dal Tadka — ₹149</div>
            <button class="add-btn" data-name="Dal Tadka" data-price="149">Add</button>
          </div>

          <div class="item-row">
            <div>Veg Noodles — ₹90</div>
            <button class="add-btn" data-name="Veg Noodles" data-price="90">Add</button>
          </div>

          <div class="item-row">
            <div>Masala Dosa — ₹149</div>
            <button class="add-btn" data-name="Masala Dosa" data-price="149">Add</button>
          </div>

          <div class="item-row">
            <div>Margherita Pizza — ₹149</div>
            <button class="add-btn" data-name="Margherita Pizza" data-price="149">Add</button>
          </div>

          <div class="item-row">
            <div>Cold Coffee — ₹100</div>
            <button class="add-btn" data-name="Cold Coffee" data-price="100">Add</button>
          </div>

        </div>
      </div>

      <!-- RIGHT: cart and checkout -->
      <div>
        <div class="cart-box" id="checkoutBox" style="display:none;">
          <h3>Your Cart</h3>
          <div id="cartList" style="margin:8px 0 12px"></div>
          <div style="display:flex;justify-content:space-between;margin-top:8px">
            <div><strong>Total</strong></div>
            <div>₹<span id="cartTotal">0</span></div>
          </div>
          <div style="display:flex;justify-content:space-between;margin-top:6px">
            <div><strong>50% Advance</strong></div>
            <div>₹<span id="advanceTotal">0</span></div>
          </div>

          <button id="openCheckout" class="add-btn" style="width:100%;margin-top:12px;background:#b2322a">Checkout →</button>
        </div>

        <div class="qr-box" id="qrSection" style="display:none;">
          <h4>Pay 50% Advance (scan QR)</h4>
          <!-- QR image: ensure images/qr.png exists -->
          <img src="images/qr.png" alt="Pay QR" style="max-width:220px;border-radius:8px;margin-top:8px">
          <p style="color:var(--muted);font-size:0.95rem;margin-top:8px">Scan QR and paste TXN ID in the form below after payment.</p>
        </div>

        <form id="orderForm" action="https://formspree.io/f/meonqnaw" method="POST" style="display:none;">
          <h4>Finalize Order</h4>
          <input type="hidden" id="orderData" name="order_list" value="">
          <input type="hidden" id="totalAmount" name="amount_total" value="0">
          <input type="hidden" id="advanceAmount" name="amount_advance" value="0">

          <label>Your Name *</label>
          <input type="text" name="customer_name" required>

          <label>Mobile Number *</label>
          <input type="text" name="customer_mobile" required>

          <label>Transaction ID (after payment) *</label>
          <input type="text" name="txn_id" required>

          <button type="submit">Submit Order</button>
        </form>
      </div>
    </div>
  </div>

  <footer style="text-align:center;padding:14px;margin-top:20px;color:#666;background:#fff;border-top:1px solid #eee">
    © <span id="yr"></span> Bansal Food Studio
  </footer>

  <script>
    // small helpers
    document.getElementById('yr').textContent = new Date().getFullYear();

    // cart
    let cart = [];

    // Add button handlers - use event delegation for safety
    document.addEventListener('click', function(e){
      // Add to cart buttons
      if(e.target && e.target.classList && e.target.classList.contains('add-btn') && e.target.getAttribute('data-name')){
        const name = e.target.getAttribute('data-name');
        const price = parseInt(e.target.getAttribute('data-price') || '0', 10);
        addToCart(name, price);
      }
      // remove item from cart (x button)
      if(e.target && e.target.dataset && e.target.dataset.removeIndex){
        const idx = parseInt(e.target.dataset.removeIndex, 10);
        removeItem(idx);
      }
    });

    function addToCart(name, price){
      // find
      let it = cart.find(i => i.name === name);
      if(it){ it.qty += 1; }
      else{ cart.push({name: name, price: price, qty: 1}); }
      updateCart();
      showCheckout();
    }

    function removeItem(index){
      if(index >= 0 && index < cart.length){
        cart.splice(index,1);
      }
      updateCart();
      if(cart.length === 0){
        // hide sections if empty
        document.getElementById('checkoutBox').style.display = 'none';
        document.getElementById('qrSection').style.display = 'none';
        document.getElementById('orderForm').style.display = 'none';
      }
    }

    function updateCart(){
      const list = document.getElementById('cartList');
      const totalEl = document.getElementById('cartTotal');
      const advEl = document.getElementById('advanceTotal');

      list.innerHTML = '';
      let total = 0;
      cart.forEach((it, idx) => {
        const amt = it.price * it.qty;
        total += amt;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = '<div style="flex:1">'+it.name+' (x'+it.qty+')</div><div style="min-width:80px;text-align:right">₹'+amt+'</div>';
        // remove button
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = 'x';
        btn.dataset.removeIndex = String(idx);
        btn.style.marginLeft = '8px';
        div.appendChild(btn);
        list.appendChild(div);
      });

      totalEl.textContent = String(total);
      advEl.textContent = String(Math.round(total / 2));

      // form hidden fields
      document.getElementById('orderData').value = cart.map(i => i.name + ' x ' + i.qty + ' = ₹' + (i.price * i.qty)).join(', ');
      document.getElementById('totalAmount').value = String(total);
      document.getElementById('advanceAmount').value = String(Math.round(total / 2));
    }

    function showCheckout(){
      if(cart.length > 0){
        document.getElementById('checkoutBox').style.display = 'block';
        document.getElementById('qrSection').style.display = 'block';
        document.getElementById('orderForm').style.display = 'block';
      }
    }

    // Checkout button scrolls to form (friendly)
    document.getElementById('openCheckout').addEventListener('click', function(){
      const form = document.getElementById('orderForm');
      if(cart.length === 0){
        alert('Cart is empty. Add items first.');
        return;
      }
      form.scrollIntoView({behavior:'smooth'});
    });
  </script>
</body>
</html>
