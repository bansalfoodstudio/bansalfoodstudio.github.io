<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Order Food — Bansal Food Studio</title>

  <style>
    :root{
      --accent:#b2322a;
      --muted:#666;
      --bg:#faf8f6;
      --card:#fff;
      --radius:12px;
      --maxw:1100px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:#222}
    a{text-decoration:none;color:inherit}
    .container{max-width:var(--maxw);margin:0 auto;padding:16px}
    /* header */
    .site-header{background:#fff;border-bottom:1px solid #eee;position:sticky;top:0;z-index:9}
    .inner{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
    .brand h1{margin:0;color:var(--accent);font-family:serif}
    .nav{display:flex;gap:10px;align-items:center}
    .nav a{background:#fff1ea;color:#6a2a25;padding:8px 10px;border-radius:8px;font-weight:600}
    .nav .cta{background:var(--accent);color:#fff}
    /* page head */
    .page-head{padding:20px 0}
    .page-head h2{margin:0;color:var(--accent);font-family:serif}
    .page-head p{color:var(--muted);margin-top:6px}
    /* layout */
    .layout{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:16px}
    @media(max-width:900px){ .layout{grid-template-columns:1fr} .nav{display:none} }
    /* menu list */
    .card{background:var(--card);padding:14px;border-radius:var(--radius);box-shadow:0 8px 20px rgba(0,0,0,0.04)}
    .item-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #f1eaea}
    .item-row:last-child{border-bottom:0}
    .add-btn{background:var(--accent);color:#fff;border:0;padding:6px 10px;border-radius:8px;cursor:pointer}
    /* cart */
    .cart{background:#fff;padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.04)}
    .cart h3{margin:0 0 8px 0}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #eee}
    .cart-item:last-child{border-bottom:0}
    .small{font-size:0.9rem;color:var(--muted)}
    .checkout-btn{background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:8px;width:100%;cursor:pointer}
    /* form */
    form{margin-top:12px;background:#fff;padding:12px;border-radius:10px}
    input,textarea{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:1px solid #ccc}
    label{font-weight:600;font-size:0.9rem}
    /* qr */
    .qr-box{text-align:center;margin-top:12px;background:#fff;padding:12px;border-radius:10px}
    .muted{color:var(--muted)}
  </style>
</head>
<body>

<header class="site-header">
  <div class="inner container">
    <div class="brand">
      <h1>Bansal Food Studio</h1>
    </div>

    <nav class="nav" aria-label="Main">
      <a href="index.html">Home</a>
      <a href="menu.html">Menu</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
      <a href="book.html">Book a Table</a>
      <a class="cta" href="order.html">Order Food</a>
    </nav>
  </div>
</header>

<main class="container">
  <div class="page-head">
    <h2>Order Food Online</h2>
    <p class="small">Items चुनें → Add करें → 50% advance करें → Order submit करें</p>
  </div>

  <div class="layout">
    <!-- LEFT: menu list (simple, one item per section) -->
    <div>
      <div class="card">
        <h3>Menu — Add to cart</h3>

        <!-- Simple list: (आप जरूर चाहें तो items edit कर लें) -->
        <div id="menuList">
          <div class="item-row"><div>Paneer Punjabi — ₹199</div><button class="add-btn" onclick="addToCart('Paneer Punjabi',199)">Add</button></div>
          <div class="item-row"><div>Kadhai Paneer — ₹209</div><button class="add-btn" onclick="addToCart('Kadhai Paneer',209)">Add</button></div>
          <div class="item-row"><div>Shahi Paneer — ₹219</div><button class="add-btn" onclick="addToCart('Shahi Paneer',219)">Add</button></div>

          <div style="height:8px"></div>

          <div class="item-row"><div>Dal Tadka — ₹149</div><button class="add-btn" onclick="addToCart('Dal Tadka',149)">Add</button></div>
          <div class="item-row"><div>Dal Makhni — ₹179</div><button class="add-btn" onclick="addToCart('Dal Makhni',179)">Add</button></div>

          <div style="height:8px"></div>

          <div class="item-row"><div>Veg Noodles — ₹90</div><button class="add-btn" onclick="addToCart('Veg Noodles',90)">Add</button></div>
          <div class="item-row"><div>Hakka Noodles — ₹110</div><button class="add-btn" onclick="addToCart('Hakka Noodles',110)">Add</button></div>

          <div style="height:8px"></div>

          <div class="item-row"><div>Masala Dosa — ₹149</div><button class="add-btn" onclick="addToCart('Masala Dosa',149)">Add</button></div>
          <div class="item-row"><div>Idli (2pcs) — ₹60</div><button class="add-btn" onclick="addToCart('Idli (2pcs)',60)">Add</button></div>

          <div style="height:8px"></div>

          <div class="item-row"><div>Margherita Pizza (M) — ₹149</div><button class="add-btn" onclick="addToCart('Margherita Pizza',149)">Add</button></div>
          <div class="item-row"><div>White Sauce Pasta — ₹159</div><button class="add-btn" onclick="addToCart('White Sauce Pasta',159)">Add</button></div>

          <div style="height:8px"></div>

          <div class="item-row"><div>Sweet Lassi — ₹40</div><button class="add-btn" onclick="addToCart('Sweet Lassi',40)">Add</button></div>
          <div class="item-row"><div>Cold Coffee — ₹100</div><button class="add-btn" onclick="addToCart('Cold Coffee',100)">Add</button></div>

          <div style="height:12px"></div>

          <div class="small muted">Packing charge: ₹10 extra. Prices subject to change.</div>
        </div>
      </div>
    </div>

    <!-- RIGHT: cart & checkout -->
    <aside>
      <div id="checkoutBox" class="cart" style="display:none">
        <h3>Your Cart</h3>
        <div id="cartList">
          <!-- items inserted here -->
          <div class="muted">Cart is empty</div>
        </div>

        <div style="margin-top:10px">
          <div style="display:flex;justify-content:space-between"><div>Total</div><div>₹<span id="cartTotal">0</span></div></div>
          <div style="display:flex;justify-content:space-between"><div>50% Advance</div><div>₹<span id="advanceTotal">0</span></div></div>
        </div>

        <div style="margin-top:12px">
          <button class="checkout-btn" id="openCheckout" onclick="openCheckout()">Checkout →</button>
        </div>
      </div>

      <!-- QR Section (hidden until checkout) -->
      <div id="qrSection" class="qr-box" style="display:none">
        <h4>Pay 50% Advance (QR / UPI)</h4>
        <div style="margin:8px 0">
          <!-- single QR image expected at images/qr.png — but if you don't want images just paste QR there or keep user to pay via UPI text -->
          <div style="display:inline-block;background:#f8f8f8;padding:18px;border-radius:8px;border:1px dashed #eee">
            <div class="muted">QR image (place qr.png in images/ folder)</div>
          </div>
        </div>
        <div class="muted">Payment के बाद transaction id नीचे form में दर्ज करें।</div>
      </div>

      <!-- Order Form (posts to Formspree) -->
      <form id="orderForm" action="https://formspree.io/f/meonqnaw" method="POST" style="display:none">
        <h4>Finalize Order</h4>

        <input type="hidden" id="orderData" name="order_list" value="">
        <input type="hidden" id="totalAmount" name="amount_total" value="">
        <input type="hidden" id="advanceAmount" name="amount_advance" value="">

        <label>Full name *</label>
        <input type="text" name="customer_name" required>

        <label>Mobile number *</label>
        <input type="text" name="customer_mobile" required>

        <label>Delivery / Pickup address</label>
        <textarea name="address" rows="2"></textarea>

        <label>Transaction ID (after 50% payment)</label>
        <input type="text" name="txn_id" required>

        <div style="margin-top:10px">
          <button type="submit" class="checkout-btn">Submit Order</button>
        </div>
      </form>

    </aside>
  </div>

  <footer style="text-align:center;margin-top:26px;color:var(--muted)">
    © <span id="yr"></span> Bansal Food Studio · Chawla Complex, Gangoh Rd, Nanauta
  </footer>
</main>

<!-- SCRIPT: single clean block -->
<script>
  // set footer year
  try{ document.getElementById('yr').textContent = new Date().getFullYear(); } catch(e){}

  // mobile menu (if present on site) - safe guard
  (function(){
    const btn = document.getElementById('hambtn');
    const mobileMenu = document.getElementById('mobileMenu');
    if(btn && mobileMenu){
      btn.addEventListener('click', ()=> {
        mobileMenu.style.display = (mobileMenu.style.display === 'flex') ? 'none' : 'flex';
      });
    }
  })();

  // Cart logic (clean)
  (function(){
    // state
    let cart = [];

    // helpers
    function q(id){ return document.getElementById(id); }

    // expose to global so buttons inline can call
    window.addToCart = function(name, price){
      price = Number(price) || 0;
      const f = cart.find(i => i.name === name);
      if(f) f.qty++;
      else cart.push({ name: String(name), price: price, qty: 1 });
      updateCart();
    };

    window.removeItem = function(index){
      cart.splice(index,1);
      updateCart();
    };

    window.openCheckout = function(){
      if(cart.length === 0){
        alert('Cart खाली है — पहले कोई item add करें।');
        return;
      }
      const qr = q('qrSection');
      const form = q('orderForm');
      if(qr) qr.style.display = 'block';
      if(form) form.style.display = 'block';
      // scroll to form
      if(form) form.scrollIntoView({behavior:'smooth'});
    };

    function updateCart(){
      const list = q('cartList');
      const totalEl = q('cartTotal');
      const advEl = q('advanceTotal');

      if(!list || !totalEl || !advEl) return;

      list.innerHTML = '';
      let total = 0;

      if(cart.length === 0){
        list.innerHTML = '<div class="muted">Cart is empty</div>';
      } else {
        cart.forEach((it, idx) => {
          const amt = it.price * it.qty;
          total += amt;
          const el = document.createElement('div');
          el.className = 'cart-item';
          el.innerHTML = `
            <div>${it.name} (x${it.qty})</div>
            <div style="display:flex;gap:8px;align-items:center">
              <strong>₹${amt}</strong>
              <button onclick="removeItem(${idx})" aria-label="remove">x</button>
            </div>
          `;
          list.appendChild(el);
        });
      }

      totalEl.textContent = total;
      advEl.textContent = Math.round(total / 2);

      // hidden fields (if present)
      const orderDataEl = q('orderData');
      const totalAmountEl = q('totalAmount');
      const advanceAmountEl = q('advanceAmount');

      if(orderDataEl) orderDataEl.value = cart.map(i => ${i.name} x ${i.qty} = ₹${i.price*i.qty}).join(', ');
      if(totalAmountEl) totalAmountEl.value = total;
      if(advanceAmountEl) advanceAmountEl.value = Math.round(total/2);

      // show/hide checkout box
      const checkoutBox = q('checkoutBox');
      if(checkoutBox){
        checkoutBox.style.display = (cart.length > 0) ? 'block' : 'none';
      }
    }

    // initial update
    updateCart();

  })();
</script>

</body>
</html>
